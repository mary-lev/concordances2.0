{{right_sidebar_enabled=True}}
{{response.files.append(URL(r=request,c='static',f='/js/d3.js'))}}

{{response.files.append(URL('static', 'js/d3pie.min.js'))}}
{{response.files.append(URL('static', 'js/d3pie.js'))}}
{{extend 'layout.html'}}

{{=DIV(_id="pieChart")}}
{{=all_colours}} цветообозначений на {{=all_words}} словоупотреблений корпуса.<br>
Это {{=proc}} %. <br>
Средний процент цветообозначений у авторов корпуса: {{=average_pro}} %.

<h3>Сравнить поэтические сборники:</h3>
{{=form}}
<h3>
    Сравнить авторов:
</h3>
{{=form2}}

<h4>
    Схема по месяцам: </h4>
{{for one in authors:}}
{{=A(one.name, " ", one.family, _href=URL('month', args=one.id))}}
{{pass}}

<h4>
Схема по временам года:</h4>
{{for one in authors:}}
{{=A(one.name, " ", one.family, _href=URL('seasons', args=one.id))}}
{{pass}}

{{block right_sidebar}}
{{=A(T("Админка"), _href=URL('admin','default','index', scheme='https'), _class='btn',
     _style='margin-top: 1em;')}}
<h6>{{=T("Цвета по авторам")}}</h6>
{{for one in authors:}}
<li>{{=A(one.name, " ", one.family, _href=URL('author', args=one.id))}} {{try:}} ({{=au_pro[auts.index(str(int(one.id)))]}} %) {{except:}} {{pass}}</li>
{{pass}}
{{end}}

<script>
    var pie = new d3pie("pieChart", {
	"header": {	"title": {"text": "Цвета в русской поэзии", "fontSize": 24, "font": "open sans"},
		"subtitle": {"text": "Цветообозначения во всем корпусе", "color": "#999999", "fontSize": 12, "font": "open sans"},
		"titleSubtitlePadding": 9 },
	"footer": {"color": "#999999",	"fontSize": 10,	"font": "open sans", "location": "bottom-left"	},
	"size": {"canvasWidth": 590},
	"data": {

		"content": [
            {"label": "Розовый", "value": {{=colours2[9]}},	"color": "#E7ACCF"},
            {"label": "Красный", "value": {{=colours2[3]}},	"color": "#cb2121"},
            {"label": "Багровый", "value": {{=colours2[18]}},	"color": "#cb2121"},
            {"label": "Багряный", "value": {{=colours2[19]}},	"color": "#cb2121"},
            {"label": "Алый",	"value": {{=colours2[14]}},	"color": "#FF2400"},
			{"label": "Желтый",	"value": {{=colours2[5]}},	"color": "#FFF44F"},
            {"label": "Золотой",  "value": {{=colours2[1]}}, "color": "#F7D358"},
            {"label": "Рыжий", "value": {{=colours2[15]}}, "color": "#F7D358"},
            {"label": "Оранжевый", "value": {{=colours2[17]}}, "color": "#F7D358"},
			{"label": "Зеленый", "value": {{=colours2[0]}},	"color": "#4daa4b"},
            {"label": "Бирюза",	"value": {{=colours2[16]}},	"color": "#0095B6"},
            {"label": "Лазурь",	"value": {{=colours2[13]}},	"color": "#ACE5EE"},
            {"label": "Голубой", "value": {{=colours2[2]}},	"color": "#89CFF0"},
			{"label": "Синий",	"value": {{=colours2[8]}},	"color": "#0000FF"},
            {"label": "Пурпур",	"value": {{=colours2[10]}},	"color": "#800080"},
			{"label": "Фиолетовый",	"value": {{=colours2[11]}},	"color": "#8F00FF"},
            {"label": "Лиловый",	"value": {{=colours2[20]}},	"color": "#B666D2"},
            {"label": "Сиреневый",	"value": {{=colours2[21]}},	"color": "#9F00FF"},
			{"label": "Коричневый",	"value": {{=colours2[7]}},	"color": "#6B420F"},
			{"label": "Серый",	"value": {{=colours2[12]}},	"color": "#808080"},
            {"label": "Серебряный",	"value": {{=colours2[23]}},	"color": "#C0C0C0"},
            {"label": "Сизый",	"value": {{=colours2[22]}},	"color": "#7C7474"},
            {"label": "Черный",	"value": {{=colours2[6]}},	"color": "#000000"},
            {"label": "Белый",	"value": {{=colours2[4]}},	"color": "#FFFFFF"}
		]
	},
	"labels": {
		"outer": {"pieDistance": 32	},
		"inner": {"hideWhenLessThanPercentage": 3},
		"mainLabel": {"fontSize": 11},
		"percentage": {"color": "#ffffff",	"decimalPlaces": 0},
		"value": {"color": "#adadad", "fontSize": 11},
		"lines": {"enabled": true}
            },
	"effects": {"pullOutSegmentOnClick": {"effect": "linear", "speed": 400,	"size": 8} },
	"misc": {"gradient": {"enabled": true,	"percentage": 100}	}
});
</script>
